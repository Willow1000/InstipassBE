{% extends "base_email.html" %}

{% block title %}InstiPass - {{ notification_type }}{% endblock %}

{% block header %}
<div class="email-header" style="text-align: center; padding: 20px 0; border-bottom: 1px solid #eaeaea;">
  <img src="https://via.placeholder.com/150x60?text=InstiPass" alt="InstiPass Logo" class="email-logo" style="max-width: 150px; height: auto;">
  <h1 style="color: #2c3e50; margin: 15px 0 0; font-size: 24px; font-weight: 600;">{{ notification_type }}</h1>
</div>
{% endblock %}

{% block content %}
<div class="email-content" style="max-width: 600px; margin: 0 auto; padding: 20px; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; color: #333; line-height: 1.6;">
  
  <h2 style="color: #2c3e50; margin-top: 0; font-size: 20px; font-weight: 600;">{{ subject }}</h2>

  <p style="margin-bottom: 20px;">{{ introduction_text }}</p>

  <div class="update-container" style="border-radius: 8px; padding: 20px; margin: 25px 0; position: relative;">
    <div class="emoji-container" style="text-align: center; margin-bottom: 15px;">
      <span style="font-size: 48px; display: inline-block;">{{ emoji }}</span>
    </div>
    
    <h3 style="color: #2c3e50; margin-top: 0; margin-bottom: 15px; font-size: 18px; font-weight: 600; text-align: center;">{{ details_heading }}</h3>
    
    <div class="details-grid" style="display: grid; grid-template-columns: 1fr; gap: 10px;">
      {% for key, value in details.items %}
        {% if value %}
          <div class="detail-item" style="display: flex; padding: 8px 0;">
            <strong style="min-width: 120px; color: #2c3e50;">{{ key }}:</strong>
            <span style="flex: 1;">{{ value }}</span>
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>

  {% if cta_buttons %}
  <div class="action-buttons" style="text-align: center; margin: 30px 0;">
    {% for button in cta_buttons %}
      <a href="{{ button.url }}" class="cta-button {% if button.secondary %}secondary{% endif %}" 
         style="display: inline-block; padding: 12px 24px; margin: 0 8px 10px; text-decoration: none; border-radius: 4px; font-weight: 600; font-size: 16px; {% if button.secondary %}background-color: #f8f9fa; color: #495057; border: 1px solid #ced4da;{% else %}background-color: #3498db; color: white; border: 1px solid #3498db;{% endif %}">
        {{ button.text }}
      </a>
    {% endfor %}
  </div>
  {% endif %}

  <div class="divider" style="height: 1px; background-color: #eaeaea; margin: 30px 0;"></div>

  {% if action_items %}
  <div class="action-items-container" style="background-color: #f8f9fa; border-radius: 8px; padding: 20px; margin: 20px 0;">
    <h4 style="color: #2c3e50; margin-top: 0; margin-bottom: 15px; font-size: 16px; font-weight: 600;">Action Required</h4>
    
    {% for item in action_items %}
      <div class="action-item" style="display: flex; align-items: flex-start; {% if not forloop.last %}margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #e0e0e0;{% endif %}">
        <div class="action-icon" style="margin-right: 15px; color: #2A9D8F; font-size: 20px; min-width: 24px; text-align: center; flex-shrink: 0;">{{ item.icon }}</div>
        <div class="action-content" style="flex: 1;">
          <strong style="color: #2c3e50; display: block; margin-bottom: 5px;">{{ item.title }}</strong>
          <p style="margin: 0; color: #555;">{{ item.description }}</p>
        </div>
      </div>
    {% endfor %}
  </div>
  {% endif %}

  {% if important_note %}
  <div class="important-notice" style="background-color: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; margin: 20px 0; border-radius: 0 4px 4px 0;">
    <h4 style="color: #856404; margin-top: 0; margin-bottom: 10px; font-size: 16px; font-weight: 600;">Important Note</h4>
    <p style="margin: 0; color: #856404;">{{ important_note }}</p>
  </div>
  {% endif %}

  {% if additional_message %}
  <div class="additional-message" style="margin: 20px 0;">
    <p style="margin: 0;">{{ additional_message }}</p>
  </div>
  {% endif %}

  <div class="footer" style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #eaeaea; color: #6c757d; font-size: 14px;">
    <p style="margin-bottom: 10px;">This notification has been automatically generated by the InstiPass system.</p>
    <p style="margin: 0;">
      Best regards,<br>
      <strong>The InstiPass Team</strong>
    </p>
  </div>
</div>
{% endblock %}

{% block extra_styles %}
.update-container {
  {% if notification_style == 'warning' %}
    background: linear-gradient(to right, #fff3cd, #fff8e1);
    border: 1px solid #ffc107;
    box-shadow: 0 2px 4px rgba(255, 193, 7, 0.1);
  {% elif notification_style == 'danger' %}
    background: linear-gradient(to right, #f8d7da, #fde8e8);
    border: 1px solid #dc3545;
    box-shadow: 0 2px 4px rgba(220, 53, 69, 0.1);
  {% elif notification_style == 'success' %}
    background: linear-gradient(to right, #d4edda, #e8f5e9);
    border: 1px solid #28a745;
    box-shadow: 0 2px 4px rgba(40, 167, 69, 0.1);
  {% else %}
    background: linear-gradient(to right, #e3f2fd, #f0f8ff);
    border: 1px solid #90caf9;
    box-shadow: 0 2px 4px rgba(144, 202, 249, 0.1);
  {% endif %}
}

.cta-button:hover {
  {% if button.secondary %}
    background-color: #e9ecef !important;
  {% else %}
    background-color: #2980b9 !important;
  {% endif %}
  transform: translateY(-1px);
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
  transition: all 0.2s ease;
}

@media (max-width: 600px) {
  .email-content {
    padding: 15px !important;
  }
  
  .action-buttons a {
    display: block !important;
    margin: 0 0 10px 0 !important;
    width: 100% !important;
    box-sizing: border-box;
  }
  
  .detail-item {
    flex-direction: column !important;
  }
  
  .detail-item strong {
    margin-bottom: 5px !important;
    min-width: auto !important;
  }
}
{% endblock %}